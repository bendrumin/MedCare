<div ng-include="'views/partials/nav.html'"></div>


<div class="modal-demo">
  <!-- the actual template HTML -->
  <script type="text/ng-template" id="myModalContent.html">
    <div class="modal-header">
      <h3 class="modal-title" id="modal-title">{{mic.title}}</h3>
    </div>
    <div class="modal-body" id="modal-body">
      <p>Modal Body Content</p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" type="button" ng-click="mic.ok()">OK</button>
      <button class="btn btn-warning" type="button" ng-click="mic.cancel()">Cancel</button>
    </div>
  </script>
  <button type="button" class="btn btn-default" ng-click="mc.open()">Open me!</button>


</div>
<div class="container" ng-controller="PeopleController as patient">
  <div class="row">
    <div class="col-md-12">

      <h3>Here are all the patients in the system</h3>
      <div class="table-responsive table-condenced table-hover">
        <table class="table">
          <thead>
            <tr>
              <th class="name">
                Patient Name
              </th>
              <th class="hidden-sm hidden-xs phoneNumber">Phone Number</th>
              <th class="hidden-sm hidden-xs notes">Notes</th>
              <th class="medication">Medication</th>
              <th class="dosage">Dosage</th>
              <th class="howOften">How Often</th>
              <th class="hidden-sm hidden-xs actionButtons"></th>
            </tr>
          </thead>
          <tbody>

            <tr ng-repeat="person in patient.people" >
              <td class="padding name">{{person.name}}</span></td>
              <td class="padding phoneNumber">
                <span ng-show="!rowform.$visible" editable-text="person.phoneNumber" e-class="phoneNumber" e-form="rowform" class="hidden-sm hidden-xs">{{person.phoneNumber}}</span></td>
              <td class="padding notes">
                <span ng-show="!rowform.$visible" editable-textarea="person.notes" e-class="notes" e-form="rowform" class="hidden-sm hidden-xs">{{person.notes}}</span></td>
              <td class="padding medication">
                <p ng-repeat="meds in person.allMeds">
                  {{meds.medication}}
                </p>
              </td>
              <!-- The medication, dosage and how often would be in a findById (which i have no clue how to do) -->
              <td class="padding dosage">
                <p ng-repeat="meds in person.allMeds">
                  {{meds.dosage}}
                </p>
              </td>
              <td class="padding howOften">
                <p ng-repeat="meds in person.allMeds">
                  {{meds.howOften}} time per day
                </p>
              </td>
              <td class="actionButtons">
                <form onaftersave="patient.updatePerson(person)" editable-form name="rowform" ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == person">
                  <button type="submit" ng-disabled="rowform.$waiting" class="btn btnWhite btn-newSuccess">
                    <span class="glyphicon glyphicon-ok">
                  </button>
                  <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-warning">
                    cancel
                  </button>
                </form>
                <div ng-show="!rowform.$visible">
                  <button type="button" class="btn btnWhite btn-lightBlue" ng-click="rowform.$show()">
                    <span class="glyphicon glyphicon-pencil"></span></button>
                  <button type="button" class="btn btn btn-danger" name="button" ng-click="patient.deletePerson(person._id)">
                    <span class="glyphicon glyphicon-remove"></span>
                  </button>
                </div>
              </td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
